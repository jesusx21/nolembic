#!/usr/bin/env node

const { Command } = require('commander');
const Nolembic = require('../index')

async function build() {
  const program = new Command();

  program
    .command('init')
    .description('Add init configuration file')
    .action(Nolembic.init)

    program
      .command('autogenerate <name>')
      .description('Creates a new migration with the latest changes on database')
      .action(Nolembic.autogenerate)

  await program.parseAsync(process.argv)
}

build()
  .then(() => {
    console.log('Done');
    process.exit(0);
  })
  .catch((error) => {
    console.error(error);
    process.exit(1);
  });
